<!doctype html>
<html>
	<head>
		<title>Ed Space - Worknotes - CUDA</title>
		<link href="/css/general.css" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
		<link href="/css/fortran-syntax.css" rel="stylesheet">
		<link href="/css/cpp-syntax.css" rel="stylesheet">
	</head>
	<body>
	
		<!-- Top navigation bar -->
		<nav class="navbar navbar-default sticky-top">
			<div class="container-fluid">
				<ul class="nav navbar-nav">
					<li class="nav-item"><a href="/index.html">Home</a></li>
					<li class="nav-item"><a href="/about.html">About Me</a></li>
					<li class="nav-item active"><a href="/worknotes/index.html">Work Notes</a></li>
					<li class="nav-item"><a href="/trips/index.html">Trips</a></li>
					<li class="nav-item"><a href="/apps/index.html">Web Tools</a></li>
		  		</ul>
			</div>
		</nav>
		
		<div class="normalwidth">
			<h1>precision_m</h1>
			<p>Module containing static types for single and double precision</p>
			<p>Note that <code>nvfortran</code> has the options that can be used to demote/promote the precision of real variable/parameter declarations e.g. <code>-r4</code> asks the compiler to interpret <code>real</code> declarations as <code>real(4)</code>, <code>-r8</code> interprets <code>real</code> as <code>real(8)</code>, and <code>-M[no]r8</code> will promote <code>real</code> declarations to <code>double precision</code>. <code>nvc</code>, <code>nvcc</code>, and <code>nvc++</code> don't have an equivalent as far as I know.</p>
			<p>Download: <a href="samples/precision.h" download="precision.h"><img src="/static/logos/cpp.svg" height="32px"></a> <a href="samples/precision_m.F90" download="precision_m.F90"><img src="/static/logos/Fortran.svg" height="32px"></a></p>
			<h2>C++</h2>
			<pre><code><span class="cpp">#ifndef PRECISION</span>
	<span class="cpp">#define PRECISION</span>
	<span class="ccomment">// Compile with -DDOUBLE to compile with double precision</span>
	<span class="cpp">#ifdef DOUBLE</span>
		<span class="cstd">typedef</span> <span class="cstd">double</span> userfp_t;
	<span class="cpp">#else</span>
		<span class="cstd">typedef</span> <span class="cstd">float</span> userfp_t;
	<span class="cpp"><span class="cpp">#endif</span></span>
<span class="cpp"><span class="cpp">#endif</span></span></code></pre></code>
			<h2>Fortran</h2>
            <pre><code><span class="fstd">module</span> precision_m
	<span class="fstd">integer</span>, <span class="fstd">parameter</span>:: sf = <span class="fstd">kind</span>(0.)
	<span class="fstd">integer</span>, <span class="fstd">parameter</span>:: df = <span class="fstd">kind</span>(0.d0)

	<span class="fcomment">! compile with -DDOUBLE to compile with double precision</span>
<span class="fpp">#ifdef DOUBLE</span>
	<span class="fstd">integer</span>, <span class="fstd">parameter</span>:: f = df
<span class="fpp">#else</span>
	<span class="fstd">integer</span>, <span class="fstd">parameter</span>:: f = sf
<span class="fpp">#endif</span>

<span class="fstd">end</span> <span class="fstd">module</span> precision_m</code></pre>
		</div>

		<hr>
		<div class="footer">
			<p>Content first published: 24 Jan 2023 &nbsp;&nbsp;&nbsp; Content last modified: 02 Feb 2023</p>
			<p><a href="mailto:edward_yang_125@hotmail.com"><img src="/static/logos/email.png"> Email</a>&nbsp;&nbsp;&nbsp; <a href="https://www.github.com/edoyango"><img src="/static/logos/github.png"> Github</a>&nbsp;&nbsp;&nbsp; <a href="https://www.linkedin.com/in/edward-yang-a0a9941b1"><img src="/static/logos/linkedin.png"> LinkedIn</a></p>
		</div>
		
	</body>
</html>
